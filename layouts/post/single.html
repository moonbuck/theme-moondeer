{{- /* Template for post pages */}}
{{- define "stylesheets" }}
<link rel="stylesheet" href="/assets/css/light-nav.css">
<link rel="stylesheet" href="/assets/css/post.css">
{{- end }}

{{- define "head" }}
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "BlogPosting",
  "image" : {{ apply .Params.images "absURL" "." }}
}
</script>
{{- end }}

{{- define "navigation" }}
<nav class="main-nav">
<a href="/">Latest</a>
{{- $categories := .Page.Params.categories }}
{{- with site.Menus.main }}
  {{- range . }}
  <a 
    class="{{ cond (in $categories .Title) "selected" "" }}"
    href="{{ .URL }}">
  <nobr>{{ .Title }}</nobr>
  </a>
  {{- end }}
  {{- end }}
</nav>
{{- end }}

{{- define "main" }}
<section id="wrapper">
<article class="h-entry post">
  <header>
  {{- with .Title | markdownify }}
    <h1 class="p-name">{{ . }}</h1>
    {{- end }}
    <h2 class="headline">
      <time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">
        <a class="u-url dates" href="{{ .Permalink }}">{{ .Date.Format "Jan 2, 2006" }}</a>
      </time>
    </h2>
  </header>
  <section class="e-content post-body">
      {{ .Content }}
  </section>
  
<hr>

  <section id="post-meta" class="clearfix p-author h-card">
    <a href="/" class="u-url">
    {{- if .Params.author }}
    <img class="u-photo avatar" src="https://moondeer.blog/uploads/2021/3014652aa8.jpg" width="192" height="192">
    <div>
      <span class="p-name dark">{{ .Params.author.name }}</span>
      <span><a href="https://micro.blog/{{ .Params.author.username }}">@{{ .Params.author.username }}</a></span>
    </div>
    {{- else }}
    <img class="u-photo avatar" src="https://micro.blog/{{ .Site.Author.username }}/avatar.jpg" />
    <div>
      <span class="p-name dark">{{ .Site.Author.name }}</span>
      <span><a href="https://micro.blog/{{ .Site.Author.username }}">@{{ .Site.Author.username }}</a></span>
    </div>
  {{- end }}
    </a>
  </section>
</article>

{{ partial "navigation/next-prev.html" (dict "next" .NextInSection "current" . "previous" .PrevInSection "context" .) }}

{{- if (and site.Data.theme_moondeer.config.IncludeConversation (templates.Exists "partials/plugin-conversation.html")) }}
{{ partial "plugin-conversation.html" . }}
{{- end }}

{{- if (and site.Data.theme_moondeer.config.IncludeDisqus (templates.Exists "partials/plugin-disqus.html")) }}
{{ partial "plugin-disqus.html" . }}
{{ end }}

</section>
{{- end }}